<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Yunity Studio - Fitness & Health Platform</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- React and ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    
    <!-- Babel Standalone for JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- Recharts -->
    <script src="https://unpkg.com/recharts@2.5.0/dist/Recharts.js"></script>
    
    <!-- Lucide React Icons -->
    <script src="https://unpkg.com/lucide-react@latest"></script>
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',
                'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',
                sans-serif;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;
        const { 
            Camera, Utensils, Dumbbell, User, LogOut, 
            Calendar, TrendingUp, Target, Activity 
        } = lucide;
        const { 
            LineChart, Line, XAxis, YAxis, 
            CartesianGrid, Tooltip, ResponsiveContainer 
        } = Recharts;

        // Utility Functions
        const calculateBMR = (weight, height, age, gender) => {
          if (gender === 'male') {
            return 10 * weight + 6.25 * height - 5 * age + 5;
          }
          return 10 * weight + 6.25 * height - 5 * age - 161;
        };

        const calculateTDEE = (bmr, activityLevel) => {
          const multipliers = {
            sedentary: 1.2,
            light: 1.375,
            moderate: 1.55,
            very: 1.725,
            extreme: 1.9
          };
          return bmr * multipliers[activityLevel];
        };

        const calculateCalories = (tdee, goal) => {
          const adjustments = {
            loss: -500,
            gain: 500,
            maintain: 0,
            recomp: -200
          };
          return Math.round(tdee + adjustments[goal]);
        };

        const calculateMacros = (calories, goal) => {
          const distributions = {
            loss: { protein: 0.4, carbs: 0.3, fats: 0.3 },
            gain: { protein: 0.3, carbs: 0.4, fats: 0.3 },
            maintain: { protein: 0.25, carbs: 0.45, fats: 0.3 },
            recomp: { protein: 0.35, carbs: 0.35, fats: 0.3 }
          };
          
          const dist = distributions[goal];
          return {
            protein: Math.round((calories * dist.protein) / 4),
            carbs: Math.round((calories * dist.carbs) / 4),
            fats: Math.round((calories * dist.fats) / 9)
          };
        };

        // Food Database
        const FOOD_DATABASE = [
          { name: 'Chicken Breast (100g)', calories: 165, protein: 31, carbs: 0, fats: 3.6 },
          { name: 'Brown Rice (100g)', calories: 112, protein: 2.6, carbs: 24, fats: 0.9 },
          { name: 'Salmon (100g)', calories: 208, protein: 20, carbs: 0, fats: 13 },
          { name: 'Eggs (2 large)', calories: 140, protein: 12, carbs: 1, fats: 10 },
          { name: 'Oatmeal (100g)', calories: 389, protein: 17, carbs: 66, fats: 7 },
          { name: 'Sweet Potato (100g)', calories: 86, protein: 1.6, carbs: 20, fats: 0.1 },
          { name: 'Greek Yogurt (100g)', calories: 59, protein: 10, carbs: 3.6, fats: 0.4 },
          { name: 'Banana (medium)', calories: 105, protein: 1.3, carbs: 27, fats: 0.4 },
          { name: 'Almonds (28g)', calories: 164, protein: 6, carbs: 6, fats: 14 },
          { name: 'Broccoli (100g)', calories: 34, protein: 2.8, carbs: 7, fats: 0.4 },
          { name: 'Avocado (100g)', calories: 160, protein: 2, carbs: 9, fats: 15 },
          { name: 'Whole Wheat Bread (1 slice)', calories: 80, protein: 4, carbs: 14, fats: 1 },
          { name: 'Protein Shake', calories: 120, protein: 24, carbs: 3, fats: 1.5 },
          { name: 'Apple (medium)', calories: 95, protein: 0.5, carbs: 25, fats: 0.3 },
          { name: 'Tuna (100g)', calories: 132, protein: 28, carbs: 0, fats: 1.3 }
        ];

        // Workout Database
        const EXERCISES = {
          chest: [
            { name: 'Barbell Bench Press', sets: 4, reps: '8-10', rest: 90 },
            { name: 'Incline Dumbbell Press', sets: 3, reps: '10-12', rest: 75 },
            { name: 'Cable Flyes', sets: 3, reps: '12-15', rest: 60 },
            { name: 'Push-ups', sets: 3, reps: '15-20', rest: 60 }
          ],
          back: [
            { name: 'Deadlifts', sets: 4, reps: '6-8', rest: 120 },
            { name: 'Pull-ups', sets: 4, reps: '8-10', rest: 90 },
            { name: 'Barbell Rows', sets: 4, reps: '8-10', rest: 90 },
            { name: 'Lat Pulldowns', sets: 3, reps: '10-12', rest: 75 }
          ],
          shoulders: [
            { name: 'Military Press', sets: 4, reps: '8-10', rest: 90 },
            { name: 'Lateral Raises', sets: 3, reps: '12-15', rest: 60 },
            { name: 'Front Raises', sets: 3, reps: '12-15', rest: 60 },
            { name: 'Face Pulls', sets: 3, reps: '15-20', rest: 60 }
          ],
          arms: [
            { name: 'Barbell Curls', sets: 3, reps: '10-12', rest: 75 },
            { name: 'Tricep Dips', sets: 3, reps: '10-12', rest: 75 },
            { name: 'Hammer Curls', sets: 3, reps: '12-15', rest: 60 },
            { name: 'Overhead Tricep Extension', sets: 3, reps: '12-15', rest: 60 }
          ],
          legs: [
            { name: 'Squats', sets: 4, reps: '8-10', rest: 120 },
            { name: 'Romanian Deadlifts', sets: 4, reps: '10-12', rest: 90 },
            { name: 'Leg Press', sets: 3, reps: '12-15', rest: 90 },
            { name: 'Leg Curls', sets: 3, reps: '12-15', rest: 75 }
          ],
          core: [
            { name: 'Planks', sets: 3, reps: '60s', rest: 60 },
            { name: 'Russian Twists', sets: 3, reps: '20', rest: 60 },
            { name: 'Leg Raises', sets: 3, reps: '15', rest: 60 },
            { name: 'Cable Crunches', sets: 3, reps: '15-20', rest: 60 }
          ]
        };

        // Main App Component
        function YunityStudio() {
          const [currentPage, setCurrentPage] = useState('landing');
          const [user, setUser] = useState(null);
          const [onboardingStep, setOnboardingStep] = useState(1);
          const [onboardingData, setOnboardingData] = useState({});
          const [dietPlan, setDietPlan] = useState(null);
          const [workoutPlan, setWorkoutPlan] = useState(null);
          const [foodLogs, setFoodLogs] = useState([]);
          const [selectedDate, setSelectedDate] = useState(new Date().toISOString().split('T')[0]);

          // Load data from localStorage
          useEffect(() => {
            const savedUser = localStorage.getItem('yunity_user');
            const savedDietPlan = localStorage.getItem('yunity_diet');
            const savedWorkoutPlan = localStorage.getItem('yunity_workout');
            const savedFoodLogs = localStorage.getItem('yunity_logs');
            
            if (savedUser) {
              setUser(JSON.parse(savedUser));
              setCurrentPage('dashboard');
            }
            if (savedDietPlan) setDietPlan(JSON.parse(savedDietPlan));
            if (savedWorkoutPlan) setWorkoutPlan(JSON.parse(savedWorkoutPlan));
            if (savedFoodLogs) setFoodLogs(JSON.parse(savedFoodLogs));
          }, []);

          const handleSignUp = (email, password) => {
            const newUser = { email, password, createdAt: new Date().toISOString() };
            setUser(newUser);
            localStorage.setItem('yunity_user', JSON.stringify(newUser));
            setCurrentPage('onboarding');
          };

          const handleLogin = (email, password) => {
            const savedUser = localStorage.getItem('yunity_user');
            if (savedUser) {
              const user = JSON.parse(savedUser);
              if (user.email === email && user.password === password) {
                setUser(user);
                setCurrentPage('dashboard');
              } else {
                alert('Invalid credentials');
              }
            } else {
              alert('User not found. Please sign up.');
            }
          };

          const handleLogout = () => {
            setUser(null);
            setCurrentPage('landing');
          };

          const completeOnboarding = (data) => {
            const completeData = { ...user, profile: data };
            setUser(completeData);
            localStorage.setItem('yunity_user', JSON.stringify(completeData));
            
            // Generate diet plan
            const bmr = calculateBMR(data.weight, data.height, data.age, data.gender);
            const tdee = calculateTDEE(bmr, data.activityLevel);
            const calories = calculateCalories(tdee, data.goal);
            const macros = calculateMacros(calories, data.goal);
            
            const newDietPlan = {
              calories,
              ...macros,
              bmr: Math.round(bmr),
              tdee: Math.round(tdee)
            };
            
            setDietPlan(newDietPlan);
            localStorage.setItem('yunity_diet', JSON.stringify(newDietPlan));
            
            // Generate workout plan
            const newWorkoutPlan = generateWorkoutPlan(data.targetBodyParts, data.frequency || 4);
            setWorkoutPlan(newWorkoutPlan);
            localStorage.setItem('yunity_workout', JSON.stringify(newWorkoutPlan));
            
            setCurrentPage('dashboard');
          };

          const generateWorkoutPlan = (bodyParts, frequency) => {
            const days = ['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday', 'Sunday'];
            const schedule = [];
            
            if (frequency === 3) {
              schedule.push({ day: 'Monday', focus: 'Upper Body', exercises: [...EXERCISES.chest.slice(0, 2), ...EXERCISES.back.slice(0, 2), ...EXERCISES.shoulders.slice(0, 1)] });
              schedule.push({ day: 'Wednesday', focus: 'Lower Body', exercises: EXERCISES.legs });
              schedule.push({ day: 'Friday', focus: 'Full Body', exercises: [...EXERCISES.chest.slice(0, 1), ...EXERCISES.back.slice(0, 1), ...EXERCISES.legs.slice(0, 2), ...EXERCISES.core.slice(0, 2)] });
            } else if (frequency === 4) {
              schedule.push({ day: 'Monday', focus: 'Chest & Triceps', exercises: [...EXERCISES.chest, ...EXERCISES.arms.slice(1, 3)] });
              schedule.push({ day: 'Tuesday', focus: 'Back & Biceps', exercises: [...EXERCISES.back, ...EXERCISES.arms.slice(0, 2)] });
              schedule.push({ day: 'Thursday', focus: 'Shoulders & Core', exercises: [...EXERCISES.shoulders, ...EXERCISES.core] });
              schedule.push({ day: 'Friday', focus: 'Legs', exercises: EXERCISES.legs });
            } else {
              schedule.push({ day: 'Monday', focus: 'Chest', exercises: EXERCISES.chest });
              schedule.push({ day: 'Tuesday', focus: 'Back', exercises: EXERCISES.back });
              schedule.push({ day: 'Wednesday', focus: 'Shoulders', exercises: EXERCISES.shoulders });
              schedule.push({ day: 'Thursday', focus: 'Arms', exercises: EXERCISES.arms });
              schedule.push({ day: 'Friday', focus: 'Legs', exercises: EXERCISES.legs });
            }
            
            return schedule;
          };

          const addFoodLog = (food, mealType, multiplier = 1) => {
            const newLog = {
              id: Date.now(),
              date: selectedDate,
              mealType,
              ...food,
              calories: Math.round(food.calories * multiplier),
              protein: Math.round(food.protein * multiplier),
              carbs: Math.round(food.carbs * multiplier),
              fats: Math.round(food.fats * multiplier)
            };
            
            const updatedLogs = [...foodLogs, newLog];
            setFoodLogs(updatedLogs);
            localStorage.setItem('yunity_logs', JSON.stringify(updatedLogs));
          };

          const deleteFoodLog = (id) => {
            const updatedLogs = foodLogs.filter(log => log.id !== id);
            setFoodLogs(updatedLogs);
            localStorage.setItem('yunity_logs', JSON.stringify(updatedLogs));
          };

          const getTodayTotals = () => {
            const todayLogs = foodLogs.filter(log => log.date === selectedDate);
            return todayLogs.reduce((acc, log) => ({
              calories: acc.calories + log.calories,
              protein: acc.protein + log.protein,
              carbs: acc.carbs + log.carbs,
              fats: acc.fats + log.fats
            }), { calories: 0, protein: 0, carbs: 0, fats: 0 });
          };

          // Render different pages
          if (currentPage === 'landing') {
            return <LandingPage onGetStarted={() => setCurrentPage('signup')} />;
          }

          if (currentPage === 'signup') {
            return <SignUpPage onSignUp={handleSignUp} onSwitchToLogin={() => setCurrentPage('login')} />;
          }

          if (currentPage === 'login') {
            return <LoginPage onLogin={handleLogin} onSwitchToSignUp={() => setCurrentPage('signup')} />;
          }

          if (currentPage === 'onboarding') {
            return (
              <OnboardingFlow
                step={onboardingStep}
                data={onboardingData}
                onNext={(stepData) => {
                  setOnboardingData({ ...onboardingData, ...stepData });
                  if (onboardingStep < 3) {
                    setOnboardingStep(onboardingStep + 1);
                  } else {
                    completeOnboarding({ ...onboardingData, ...stepData });
                  }
                }}
                onBack={() => setOnboardingStep(Math.max(1, onboardingStep - 1))}
              />
            );
          }

          // Main App with Navigation
          return (
            <div className="min-h-screen bg-gradient-to-br from-purple-50 to-blue-50">
              <nav className="bg-white shadow-sm border-b border-gray-200">
                <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                  <div className="flex justify-between items-center h-16">
                    <div className="flex items-center space-x-2">
                      <Activity className="w-8 h-8 text-purple-600" />
                      <span className="text-2xl font-bold text-gray-900">Yunity Studio</span>
                    </div>
                    <div className="flex items-center space-x-6">
                      <button
                        onClick={() => setCurrentPage('dashboard')}
                        className={`flex items-center space-x-2 px-3 py-2 rounded-lg transition ${currentPage === 'dashboard' ? 'text-purple-600 bg-purple-50' : 'text-gray-600 hover:text-purple-600'}`}
                      >
                        <TrendingUp className="w-5 h-5" />
                        <span className="font-medium">Dashboard</span>
                      </button>
                      <button
                        onClick={() => setCurrentPage('diet')}
                        className={`flex items-center space-x-2 px-3 py-2 rounded-lg transition ${currentPage === 'diet' ? 'text-purple-600 bg-purple-50' : 'text-gray-600 hover:text-purple-600'}`}
                      >
                        <Utensils className="w-5 h-5" />
                        <span className="font-medium">Diet Plan</span>
                      </button>
                      <button
                        onClick={() => setCurrentPage('workout')}
                        className={`flex items-center space-x-2 px-3 py-2 rounded-lg transition ${currentPage === 'workout' ? 'text-purple-600 bg-purple-50' : 'text-gray-600 hover:text-purple-600'}`}
                      >
                        <Dumbbell className="w-5 h-5" />
                        <span className="font-medium">Workout</span>
                      </button>
                      <button
                        onClick={() => setCurrentPage('tracker')}
                        className={`flex items-center space-x-2 px-3 py-2 rounded-lg transition ${currentPage === 'tracker' ? 'text-purple-600 bg-purple-50' : 'text-gray-600 hover:text-purple-600'}`}
                      >
                        <Calendar className="w-5 h-5" />
                        <span className="font-medium">Food Tracker</span>
                      </button>
                      <button
                        onClick={handleLogout}
                        className="flex items-center space-x-2 px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition"
                      >
                        <LogOut className="w-5 h-5" />
                        <span className="font-medium">Logout</span>
                      </button>
                    </div>
                  </div>
                </div>
              </nav>

              <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
                {currentPage === 'dashboard' && (
                  <Dashboard user={user} dietPlan={dietPlan} workoutPlan={workoutPlan} todayTotals={getTodayTotals()} />
                )}
                {currentPage === 'diet' && <DietPlanPage dietPlan={dietPlan} goal={user?.profile?.goal} />}
                {currentPage === 'workout' && <WorkoutPlanPage workoutPlan={workoutPlan} />}
                {currentPage === 'tracker' && (
                  <FoodTrackerPage
                    selectedDate={selectedDate}
                    setSelectedDate={setSelectedDate}
                    foodLogs={foodLogs.filter(log => log.date === selectedDate)}
                    addFoodLog={addFoodLog}
                    deleteFoodLog={deleteFoodLog}
                    todayTotals={getTodayTotals()}
                    dietPlan={dietPlan}
                  />
                )}
              </div>
            </div>
          );
        }

        // Landing Page Component
        function LandingPage({ onGetStarted }) {
          return (
            <div className="min-h-screen bg-gradient-to-br from-purple-600 via-purple-500 to-blue-500">
              <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-20">
                <div className="text-center">
                  <div className="flex justify-center mb-6">
                    <Activity className="w-20 h-20 text-white" />
                  </div>
                  <h1 className="text-6xl font-bold text-white mb-6">Yunity Studio</h1>
                  <p className="text-2xl text-purple-100 mb-12 max-w-2xl mx-auto">
                    Your personalized fitness and nutrition companion. Custom diet plans, targeted workouts, and daily tracking.
                  </p>
                  <button
                    onClick={onGetStarted}
                    className="bg-white text-purple-600 px-12 py-4 rounded-full text-xl font-bold hover:bg-purple-50 transition transform hover:scale-105 shadow-2xl"
                  >
                    Get Started Free
                  </button>
                </div>

                <div className="grid md:grid-cols-3 gap-8 mt-20">
                  <div className="bg-white/10 backdrop-blur-sm p-8 rounded-2xl text-white">
                    <Utensils className="w-12 h-12 mb-4" />
                    <h3 className="text-2xl font-bold mb-3">Custom Diet Plans</h3>
                    <p className="text-purple-100">Personalized calorie and macro targets based on your body and goals.</p>
                  </div>
                  <div className="bg-white/10 backdrop-blur-sm p-8 rounded-2xl text-white">
                    <Dumbbell className="w-12 h-12 mb-4" />
                    <h3 className="text-2xl font-bold mb-3">Targeted Workouts</h3>
                    <p className="text-purple-100">Science-backed exercise plans for the body parts you want to develop.</p>
                  </div>
                  <div className="bg-white/10 backdrop-blur-sm p-8 rounded-2xl text-white">
                    <Calendar className="w-12 h-12 mb-4" />
                    <h3 className="text-2xl font-bold mb-3">Daily Tracking</h3>
                    <p className="text-purple-100">Log your meals and monitor your progress with intuitive tracking tools.</p>
                  </div>
                </div>
              </div>
            </div>
          );
        }

        // Sign Up Page
        function SignUpPage({ onSignUp, onSwitchToLogin }) {
          const [email, setEmail] = useState('');
          const [password, setPassword] = useState('');

          const handleSubmit = (e) => {
            e.preventDefault();
            if (email && password) {
              onSignUp(email, password);
            }
          };

          return (
            <div className="min-h-screen bg-gradient-to-br from-purple-600 to-blue-500 flex items-center justify-center px-4">
              <div className="bg-white p-8 rounded-2xl shadow-2xl w-full max-w-md">
                <div className="flex justify-center mb-6">
                  <Activity className="w-16 h-16 text-purple-600" />
                </div>
                <h2 className="text-3xl font-bold text-center text-gray-900 mb-8">Create Account</h2>
                <form onSubmit={handleSubmit} className="space-y-6">
                  <div>
                    <label className="block text-sm font-medium text-gray-700 mb-2">Email</label>
                    <input
                      type="email"
                      value={email}
                      onChange={(e) => setEmail(e.target.value)}
                      className="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-600 focus:border-transparent"
                      placeholder="your@email.com"
                      required
                    />
                  </div>
                  <div>
                    <label className="block text-sm font-medium text-gray-700 mb-2">Password</label>
                    <input
                      type="password"
                      value={password}
                      onChange={(e) => setPassword(e.target.value)}
                      className="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-600 focus:border-transparent"
                      placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢"
                      required
                    />
                  </div>
                  <button
                    type="submit"
                    className="w-full bg-purple-600 text-white py-3 rounded-lg font-medium hover:bg-purple-700 transition"
                  >
                    Sign Up
                  </button>
                </form>
                <p className="text-center text-gray-600 mt-6">
                  Already have an account?{' '}
                  <button onClick={onSwitchToLogin} className="text-purple-600 font-medium hover:underline">
                    Log in
                  </button>
                </p>
              </div>
            </div>
          );
        }

        // Login Page
        function LoginPage({ onLogin, onSwitchToSignUp }) {
          const [email, setEmail] = useState('');
          const [password, setPassword] = useState('');

          const handleSubmit = (e) => {
            e.preventDefault();
            onLogin(email, password);
          };

          return (
            <div className="min-h-screen bg-gradient-to-br from-purple-600 to-blue-500 flex items-center justify-center px-4">
              <div className="bg-white p-8 rounded-2xl shadow-2xl w-full max-w-md">
                <div className="flex justify-center mb-6">
                  <Activity className="w-16 h-16 text-purple-600" />
                </div>
                <h2 className="text-3xl font-bold text-center text-gray-900 mb-8">Welcome Back</h2>
                <form onSubmit={handleSubmit} className="space-y-6">
                  <div>
                    <label className="block text-sm font-medium text-gray-700 mb-2">Email</label>
                    <input
                      type="email"
                      value={email}
                      onChange={(e) => setEmail(e.target.value)}
                      className="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-600 focus:border-transparent"
                      placeholder="your@email.com"
                      required
                    />
                  </div>
                  <div>
                    <label className="block text-sm font-medium text-gray-700 mb-2">Password</label>
                    <input
                      type="password"
                      value={password}
                      onChange={(e) => setPassword(e.target.value)}
                      className="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-600 focus:border-transparent"
                      placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢"
                      required
                    />
                  </div>
                  <button
                    type="submit"
                    className="w-full bg-purple-600 text-white py-3 rounded-lg font-medium hover:bg-purple-700 transition"
                  >
                    Log In
                  </button>
                </form>
                <p className="text-center text-gray-600 mt-6">
                  Don't have an account?{' '}
                  <button onClick={onSwitchToSignUp} className="text-purple-600 font-medium hover:underline">
                    Sign up
                  </button>
                </p>
              </div>
            </div>
          );
        }

        // Onboarding Flow
        function OnboardingFlow({ step, data, onNext, onBack }) {
          const [formData, setFormData] = useState({});

          const handleNext = () => {
            onNext(formData);
          };

          if (step === 1) {
            return (
              <div className="min-h-screen bg-gradient-to-br from-purple-600 to-blue-500 flex items-center justify-center px-4">
                <div className="bg-white p-8 rounded-2xl shadow-2xl w-full max-w-2xl">
                  <h2 className="text-3xl font-bold text-gray-900 mb-2">Let's get to know you</h2>
                  <p className="text-gray-600 mb-8">Step 1 of 3: Basic Information</p>
                  
                  <div className="space-y-6">
                    <div className="grid md:grid-cols-2 gap-6">
                      <div>
                        <label className="block text-sm font-medium text-gray-700 mb-2">Age</label>
                        <input
                          type="number"
                          value={formData.age || ''}
                          onChange={(e) => setFormData({ ...formData, age: parseInt(e.target.value) })}
                          className="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-600"
                          placeholder="25"
                          required
                        />
                      </div>
                      <div>
                        <label className="block text-sm font-medium text-gray-700 mb-2">Gender</label>
                        <select
                          value={formData.gender || ''}
                          onChange={(e) => setFormData({ ...formData, gender: e.target.value })}
                          className="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-600"
                          required
                        >
                          <option value="">Select</option>
                          <option value="male">Male</option>
                          <option value="female">Female</option>
                        </select>
                      </div>
                    </div>

                    <div className="grid md:grid-cols-2 gap-6">
                      <div>
                        <label className="block text-sm font-medium text-gray-700 mb-2">Height (cm)</label>
                        <input
                          type="number"
                          value={formData.height || ''}
                          onChange={(e) => setFormData({ ...formData, height: parseInt(e.target.value) })}
                          className="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-600"
                          placeholder="175"
                          required
                        />
                      </div>
                      <div>
                        <label className="block text-sm font-medium text-gray-700 mb-2">Weight (kg)</label>
                        <input
                          type="number"
                          value={formData.weight || ''}
                          onChange={(e) => setFormData({ ...formData, weight: parseInt(e.target.value) })}
                          className="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-600"
                          placeholder="70"
                          required
                        />
                      </div>
                    </div>

                    <button
                      onClick={handleNext}
                      disabled={!formData.age || !formData.gender || !formData.height || !formData.weight}
                      className="w-full bg-purple-600 text-white py-3 rounded-lg font-medium hover:bg-purple-700 transition disabled:bg-gray-300 disabled:cursor-not-allowed"
                    >
                      Next Step
                    </button>
                  </div>
                </div>
              </div>
            );
          }

          if (step === 2) {
            return (
              <div className="min-h-screen bg-gradient-to-br from-purple-600 to-blue-500 flex items-center justify-center px-4">
                <div className="bg-white p-8 rounded-2xl shadow-2xl w-full max-w-2xl">
                  <h2 className="text-3xl font-bold text-gray-900 mb-2">Your lifestyle</h2>
                  <p className="text-gray-600 mb-8">Step 2 of 3: Activity & Goals</p>
                  
                  <div className="space-y-6">
                    <div>
                      <label className="block text-sm font-medium text-gray-700 mb-2">Activity Level</label>
                      <select
                        value={formData.activityLevel || ''}
                        onChange={(e) => setFormData({ ...formData, activityLevel: e.target.value })}
                        className="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-600"
                        required
                      >
                        <option value="">Select your activity level</option>
                        <option value="sedentary">Sedentary (little or no exercise)</option>
                        <option value="light">Lightly Active (1-3 days/week)</option>
                        <option value="moderate">Moderately Active (3-5 days/week)</option>
                        <option value="very">Very Active (6-7 days/week)</option>
                        <option value="extreme">Extremely Active (athlete)</option>
                      </select>
                    </div>

                    <div>
                      <label className="block text-sm font-medium text-gray-700 mb-2">Fitness Goal</label>
                      <select
                        value={formData.goal || ''}
                        onChange={(e) => setFormData({ ...formData, goal: e.target.value })}
                        className="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-600"
                        required
                      >
                        <option value="">Select your goal</option>
                        <option value="loss">Weight Loss</option>
                        <option value="gain">Muscle Gain</option>
                        <option value="maintain">Maintain Weight</option>
                        <option value="recomp">Body Recomposition</option>
                      </select>
                    </div>

                    <div>
                      <label className="block text-sm font-medium text-gray-700 mb-2">Workout Frequency (days/week)</label>
                      <select
                        value={formData.frequency || ''}
                        onChange={(e) => setFormData({ ...formData, frequency: parseInt(e.target.value) })}
                        className="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-600"
                        required
                      >
                        <option value="">Select frequency</option>
                        <option value="3">3 days per week</option>
                        <option value="4">4 days per week</option>
                        <option value="5">5 days per week</option>
                      </select>
                    </div>

                    <div className="flex space-x-4">
                      <button
                        onClick={onBack}
                        className="w-full bg-gray-200 text-gray-700 py-3 rounded-lg font-medium hover:bg-gray-300 transition"
                      >
                        Back
                      </button>
                      <button
                        onClick={handleNext}
                        disabled={!formData.activityLevel || !formData.goal || !formData.frequency}
                        className="w-full bg-purple-600 text-white py-3 rounded-lg font-medium hover:bg-purple-700 transition disabled:bg-gray-300 disabled:cursor-not-allowed"
                      >
                        Next Step
                      </button>
                    </div>
                  </div>
                </div>
              </div>
            );
          }

          if (step === 3) {
            const bodyParts = ['chest', 'back', 'shoulders', 'arms', 'legs', 'core'];
            const [selected, setSelected] = useState(formData.targetBodyParts || []);

            const toggleBodyPart = (part) => {
              if (selected.includes(part)) {
                setSelected(selected.filter(p => p !== part));
              } else {
                setSelected([...selected, part]);
              }
            };

            return (
              <div className="min-h-screen bg-gradient-to-br from-purple-600 to-blue-500 flex items-center justify-center px-4">
                <div className="bg-white p-8 rounded-2xl shadow-2xl w-full max-w-2xl">
                  <h2 className="text-3xl font-bold text-gray-900 mb-2">Target areas</h2>
                  <p className="text-gray-600 mb-8">Step 3 of 3: Select body parts you want to focus on</p>
                  
                  <div className="grid grid-cols-2 md:grid-cols-3 gap-4 mb-8">
                    {bodyParts.map(part => (
                      <button
                        key={part}
                        onClick={() => toggleBodyPart(part)}
                        className={`p-4 rounded-lg border-2 transition ${
                          selected.includes(part)
                            ? 'border-purple-600 bg-purple-50 text-purple-700'
                            : 'border-gray-300 hover:border-purple-300'
                        }`}
                      >
                        <div className="text-lg font-medium capitalize">{part}</div>
                      </button>
                    ))}
                  </div>

                  <div className="flex space-x-4">
                    <button
                      onClick={onBack}
                      className="w-full bg-gray-200 text-gray-700 py-3 rounded-lg font-medium hover:bg-gray-300 transition"
                    >
                      Back
                    </button>
                    <button
                      onClick={() => {
                        formData.targetBodyParts = selected;
                        handleNext();
                      }}
                      disabled={selected.length === 0}
                      className="w-full bg-purple-600 text-white py-3 rounded-lg font-medium hover:bg-purple-700 transition disabled:bg-gray-300 disabled:cursor-not-allowed"
                    >
                      Complete Setup
                    </button>
                  </div>
                </div>
              </div>
            );
          }
        }

        // Dashboard Component
        function Dashboard({ user, dietPlan, workoutPlan, todayTotals }) {
          if (!dietPlan) return null;

          const calorieProgress = (todayTotals.calories / dietPlan.calories) * 100;
          const proteinProgress = (todayTotals.protein / dietPlan.protein) * 100;

          return (
            <div className="space-y-6">
              <div>
                <h1 className="text-4xl font-bold text-gray-900 mb-2">Welcome back!</h1>
                <p className="text-gray-600">Here's your overview for today</p>
              </div>

              <div className="grid md:grid-cols-3 gap-6">
                <div className="bg-white p-6 rounded-xl shadow-sm border border-gray-200">
                  <div className="flex items-center justify-between mb-4">
                    <h3 className="text-lg font-semibold text-gray-700">Daily Calories</h3>
                    <Target className="w-6 h-6 text-purple-600" />
                  </div>
                  <div className="text-3xl font-bold text-gray-900 mb-2">
                    {todayTotals.calories} / {dietPlan.calories}
                  </div>
                  <div className="w-full bg-gray-200 rounded-full h-3">
                    <div
                      className="bg-purple-600 h-3 rounded-full transition-all"
                      style={{ width: `${Math.min(calorieProgress, 100)}%` }}
                    />
                  </div>
                  <p className="text-sm text-gray-600 mt-2">{Math.round(calorieProgress)}% of goal</p>
                </div>

                <div className="bg-white p-6 rounded-xl shadow-sm border border-gray-200">
                  <div className="flex items-center justify-between mb-4">
                    <h3 className="text-lg font-semibold text-gray-700">Protein</h3>
                    <Utensils className="w-6 h-6 text-green-600" />
                  </div>
                  <div className="text-3xl font-bold text-gray-900 mb-2">
                    {todayTotals.protein}g / {dietPlan.protein}g
                  </div>
                  <div className="w-full bg-gray-200 rounded-full h-3">
                    <div
                      className="bg-green-600 h-3 rounded-full transition-all"
                      style={{ width: `${Math.min(proteinProgress, 100)}%` }}
                    />
                  </div>
                  <p className="text-sm text-gray-600 mt-2">{Math.round(proteinProgress)}% of goal</p>
                </div>

                <div className="bg-white p-6 rounded-xl shadow-sm border border-gray-200">
                  <div className="flex items-center justify-between mb-4">
                    <h3 className="text-lg font-semibold text-gray-700">Workouts This Week</h3>
                    <Dumbbell className="w-6 h-6 text-blue-600" />
                  </div>
                  <div className="text-3xl font-bold text-gray-900 mb-2">
                    {workoutPlan ? workoutPlan.length : 0} planned
                  </div>
                  <p className="text-sm text-gray-600 mt-2">Stay consistent!</p>
                </div>
              </div>

              <div className="grid md:grid-cols-2 gap-6">
                <div className="bg-white p-6 rounded-xl shadow-sm border border-gray-200">
                  <h3 className="text-xl font-bold text-gray-900 mb-4">Today's Macros</h3>
                  <div className="space-y-4">
                    <div>
                      <div className="flex justify-between mb-2">
                        <span className="text-gray-700">Carbs</span>
                        <span className="font-medium">{todayTotals.carbs}g / {dietPlan.carbs}g</span>
                      </div>
                      <div className="w-full bg-gray-200 rounded-full h-2">
                        <div
                          className="bg-orange-500 h-2 rounded-full"
                          style={{ width: `${Math.min((todayTotals.carbs / dietPlan.carbs) * 100, 100)}%` }}
                        />
                      </div>
                    </div>
                    <div>
                      <div className="flex justify-between mb-2">
                        <span className="text-gray-700">Fats</span>
                        <span className="font-medium">{todayTotals.fats}g / {dietPlan.fats}g</span>
                      </div>
                      <div className="w-full bg-gray-200 rounded-full h-2">
                        <div
                          className="bg-yellow-500 h-2 rounded-full"
                          style={{ width: `${Math.min((todayTotals.fats / dietPlan.fats) * 100, 100)}%` }}
                        />
                      </div>
                    </div>
                  </div>
                </div>

                <div className="bg-white p-6 rounded-xl shadow-sm border border-gray-200">
                  <h3 className="text-xl font-bold text-gray-900 mb-4">Your Stats</h3>
                  <div className="space-y-3">
                    <div className="flex justify-between">
                      <span className="text-gray-700">BMR:</span>
                      <span className="font-medium">{dietPlan.bmr} cal/day</span>
                    </div>
                    <div className="flex justify-between">
                      <span className="text-gray-700">TDEE:</span>
                      <span className="font-medium">{dietPlan.tdee} cal/day</span>
                    </div>
                    <div className="flex justify-between">
                      <span className="text-gray-700">Age:</span>
                      <span className="font-medium">{user?.profile?.age} years</span>
                    </div>
                    <div className="flex justify-between">
                      <span className="text-gray-700">Weight:</span>
                      <span className="font-medium">{user?.profile?.weight} kg</span>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          );
        }

        // Diet Plan Page Component
        function DietPlanPage({ dietPlan, goal }) {
          if (!dietPlan) return null;

          const goalText = {
            loss: 'Weight Loss',
            gain: 'Muscle Gain',
            maintain: 'Weight Maintenance',
            recomp: 'Body Recomposition'
          };

          const mealSuggestions = {
            breakfast: [
              '3 eggs scrambled + 2 slices whole wheat toast + 1 banana',
              'Oatmeal (80g) + Greek yogurt (150g) + berries + almonds (20g)',
              'Protein smoothie (banana, protein powder, oats, milk)',
              'Whole wheat pancakes + eggs + fruit'
            ],
            lunch: [
              'Grilled chicken breast (150g) + brown rice (100g) + broccoli',
              'Salmon (150g) + sweet potato (200g) + mixed vegetables',
              'Tuna salad + quinoa + avocado',
              'Turkey wrap + vegetables + hummus'
            ],
            dinner: [
              'Lean beef (150g) + brown rice + green beans',
              'Grilled fish + roasted vegetables + quinoa',
              'Chicken stir-fry + brown rice + mixed vegetables',
              'Lean pork + sweet potato + salad'
            ],
            snacks: [
              'Greek yogurt + berries',
              'Protein shake + banana',
              'Almonds (28g) + apple',
              'Rice cakes + peanut butter'
            ]
          };

          return (
            <div className="space-y-6">
              <div className="bg-gradient-to-r from-purple-600 to-blue-500 p-8 rounded-xl text-white">
                <h1 className="text-4xl font-bold mb-2">Your Custom Diet Plan</h1>
                <p className="text-xl text-purple-100">Optimized for: {goalText[goal]}</p>
              </div>

              <div className="grid md:grid-cols-4 gap-4">
                <div className="bg-white p-6 rounded-xl shadow-sm border-2 border-purple-600">
                  <h3 className="text-sm font-medium text-gray-600 mb-2">Daily Calories</h3>
                  <p className="text-3xl font-bold text-purple-600">{dietPlan.calories}</p>
                </div>
                <div className="bg-white p-6 rounded-xl shadow-sm border-2 border-green-600">
                  <h3 className="text-sm font-medium text-gray-600 mb-2">Protein</h3>
                  <p className="text-3xl font-bold text-green-600">{dietPlan.protein}g</p>
                </div>
                <div className="bg-white p-6 rounded-xl shadow-sm border-2 border-orange-600">
                  <h3 className="text-sm font-medium text-gray-600 mb-2">Carbs</h3>
                  <p className="text-3xl font-bold text-orange-600">{dietPlan.carbs}g</p>
                </div>
                <div className="bg-white p-6 rounded-xl shadow-sm border-2 border-yellow-600">
                  <h3 className="text-sm font-medium text-gray-600 mb-2">Fats</h3>
                  <p className="text-3xl font-bold text-yellow-600">{dietPlan.fats}g</p>
                </div>
              </div>

              <div className="bg-white p-8 rounded-xl shadow-sm border border-gray-200">
                <h2 className="text-2xl font-bold text-gray-900 mb-6">Sample Meal Ideas</h2>
                
                <div className="space-y-6">
                  {Object.entries(mealSuggestions).map(([meal, suggestions]) => (
                    <div key={meal}>
                      <h3 className="text-lg font-bold text-gray-800 mb-3 capitalize">{meal}</h3>
                      <ul className="space-y-2">
                        {suggestions.map((suggestion, idx) => (
                          <li key={idx} className="flex items-start">
                            <span className="text-purple-600 mr-2">â€¢</span>
                            <span className="text-gray-700">{suggestion}</span>
                          </li>
                        ))}
                      </ul>
                    </div>
                  ))}
                </div>
              </div>

              <div className="bg-blue-50 border border-blue-200 p-6 rounded-xl">
                <h3 className="text-lg font-bold text-blue-900 mb-3">ðŸ’¡ Pro Tips</h3>
                <ul className="space-y-2 text-blue-800">
                  <li>â€¢ Drink at least 2-3 liters of water daily</li>
                  <li>â€¢ Eat protein with every meal for satiety</li>
                  <li>â€¢ Track your food in the Food Tracker for best results</li>
                  <li>â€¢ Adjust portions based on your energy levels</li>
                  <li>â€¢ Meal prep on weekends for consistency</li>
                </ul>
              </div>
            </div>
          );
        }

        // Workout Plan Page Component
        function WorkoutPlanPage({ workoutPlan }) {
          if (!workoutPlan) return null;

          return (
            <div className="space-y-6">
              <div className="bg-gradient-to-r from-blue-600 to-purple-500 p-8 rounded-xl text-white">
                <h1 className="text-4xl font-bold mb-2">Your Workout Plan</h1>
                <p className="text-xl text-blue-100">{workoutPlan.length} training days per week</p>
              </div>

              <div className="space-y-6">
                {workoutPlan.map((day, idx) => (
                  <div key={idx} className="bg-white p-6 rounded-xl shadow-sm border border-gray-200">
                    <div className="flex items-center justify-between mb-4">
                      <div>
                        <h3 className="text-2xl font-bold text-gray-900">{day.day}</h3>
                        <p className="text-purple-600 font-medium">{day.focus}</p>
                      </div>
                      <Dumbbell className="w-8 h-8 text-purple-600" />
                    </div>

                    <div className="space-y-4">
                      {day.exercises.map((exercise, exIdx) => (
                        <div key={exIdx} className="flex items-center justify-between p-4 bg-gray-50 rounded-lg">
                          <div>
                            <h4 className="font-semibold text-gray-900">{exercise.name}</h4>
                            <p className="text-sm text-gray-600">
                              {exercise.sets} sets Ã— {exercise.reps} reps
                            </p>
                          </div>
                          <div className="text-right">
                            <p className="text-sm text-gray-600">Rest</p>
                            <p className="font-medium text-gray-900">{exercise.rest}s</p>
                          </div>
                        </div>
                      ))}
                    </div>
                  </div>
                ))}
              </div>

              <div className="bg-green-50 border border-green-200 p-6 rounded-xl">
                <h3 className="text-lg font-bold text-green-900 mb-3">ðŸ’ª Workout Tips</h3>
                <ul className="space-y-2 text-green-800">
                  <li>â€¢ Always warm up for 5-10 minutes before lifting</li>
                  <li>â€¢ Focus on proper form over heavy weight</li>
                  <li>â€¢ Progressive overload: increase weight gradually</li>
                  <li>â€¢ Rest 1-2 minutes between sets for hypertrophy</li>
                  <li>â€¢ Cool down and stretch after each workout</li>
                </ul>
              </div>
            </div>
          );
        }

        // Food Tracker Page Component
        function FoodTrackerPage({ selectedDate, setSelectedDate, foodLogs, addFoodLog, deleteFoodLog, todayTotals, dietPlan }) {
          const [showAddFood, setShowAddFood] = useState(false);
          const [selectedMeal, setSelectedMeal] = useState('breakfast');
          const [searchTerm, setSearchTerm] = useState('');
          const [selectedFood, setSelectedFood] = useState(null);
          const [multiplier, setMultiplier] = useState(1);

          const filteredFoods = FOOD_DATABASE.filter(food =>
            food.name.toLowerCase().includes(searchTerm.toLowerCase())
          );

          const handleAddFood = () => {
            if (selectedFood) {
              addFoodLog(selectedFood, selectedMeal, multiplier);
              setShowAddFood(false);
              setSelectedFood(null);
              setSearchTerm('');
              setMultiplier(1);
            }
          };

          const mealLogs = {
            breakfast: foodLogs.filter(log => log.mealType === 'breakfast'),
            lunch: foodLogs.filter(log => log.mealType === 'lunch'),
            dinner: foodLogs.filter(log => log.mealType === 'dinner'),
            snacks: foodLogs.filter(log => log.mealType === 'snacks')
          };

          return (
            <div className="space-y-6">
              <div className="bg-gradient-to-r from-green-600 to-blue-500 p-8 rounded-xl text-white">
                <h1 className="text-4xl font-bold mb-2">Food Tracker</h1>
                <div className="flex items-center space-x-4 mt-4">
                  <input
                    type="date"
                    value={selectedDate}
                    onChange={(e) => setSelectedDate(e.target.value)}
                    className="px-4 py-2 rounded-lg text-gray-900 font-medium"
                  />
                </div>
              </div>

              {dietPlan && (
                <div className="grid md:grid-cols-4 gap-4">
                  <div className="bg-white p-6 rounded-xl shadow-sm">
                    <h3 className="text-sm font-medium text-gray-600 mb-2">Calories</h3>
                    <p className="text-2xl font-bold text-gray-900">{todayTotals.calories}</p>
                    <p className="text-sm text-gray-600">/ {dietPlan.calories} goal</p>
                    <div className="mt-2 w-full bg-gray-200 rounded-full h-2">
                      <div
                        className="bg-purple-600 h-2 rounded-full"
                        style={{ width: `${Math.min((todayTotals.calories / dietPlan.calories) * 100, 100)}%` }}
                      />
                    </div>
                  </div>
                  <div className="bg-white p-6 rounded-xl shadow-sm">
                    <h3 className="text-sm font-medium text-gray-600 mb-2">Protein</h3>
                    <p className="text-2xl font-bold text-green-600">{todayTotals.protein}g</p>
                    <p className="text-sm text-gray-600">/ {dietPlan.protein}g</p>
                  </div>
                  <div className="bg-white p-6 rounded-xl shadow-sm">
                    <h3 className="text-sm font-medium text-gray-600 mb-2">Carbs</h3>
                    <p className="text-2xl font-bold text-orange-600">{todayTotals.carbs}g</p>
                    <p className="text-sm text-gray-600">/ {dietPlan.carbs}g</p>
                  </div>
                  <div className="bg-white p-6 rounded-xl shadow-sm">
                    <h3 className="text-sm font-medium text-gray-600 mb-2">Fats</h3>
                    <p className="text-2xl font-bold text-yellow-600">{todayTotals.fats}g</p>
                    <p className="text-sm text-gray-600">/ {dietPlan.fats}g</p>
                  </div>
                </div>
              )}

              <div className="space-y-6">
                {['breakfast', 'lunch', 'dinner', 'snacks'].map(meal => (
                  <div key={meal} className="bg-white p-6 rounded-xl shadow-sm border border-gray-200">
                    <div className="flex items-center justify-between mb-4">
                      <h3 className="text-xl font-bold text-gray-900 capitalize">{meal}</h3>
                      <button
                        onClick={() => {
                          setSelectedMeal(meal);
                          setShowAddFood(true);
                        }}
                        className="px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition font-medium"
                      >
                        + Add Food
                      </button>
                    </div>

                    {mealLogs[meal].length === 0 ? (
                      <p className="text-gray-500 italic">No food logged yet</p>
                    ) : (
                      <div className="space-y-2">
                        {mealLogs[meal].map(log => (
                          <div key={log.id} className="flex items-center justify-between p-4 bg-gray-50 rounded-lg">
                            <div>
                              <h4 className="font-semibold text-gray-900">{log.name}</h4>
                              <p className="text-sm text-gray-600">
                                {log.calories} cal â€¢ {log.protein}g protein â€¢ {log.carbs}g carbs â€¢ {log.fats}g fats
                              </p>
                            </div>
                            <button
                              onClick={() => deleteFoodLog(log.id)}
                              className="text-red-600 hover:text-red-800 font-medium"
                            >
                              Remove
                            </button>
                          </div>
                        ))}
                      </div>
                    )}
                  </div>
                ))}
              </div>

              {showAddFood && (
                <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50">
                  <div className="bg-white rounded-xl p-8 max-w-2xl w-full max-h-[80vh] overflow-y-auto">
                    <h2 className="text-2xl font-bold text-gray-900 mb-4">Add Food to {selectedMeal}</h2>
                    
                    <input
                      type="text"
                      placeholder="Search foods..."
                      value={searchTerm}
                      onChange={(e) => setSearchTerm(e.target.value)}
                      className="w-full px-4 py-3 border border-gray-300 rounded-lg mb-4 focus:ring-2 focus:ring-purple-600"
                    />

                    <div className="space-y-2 mb-6 max-h-60 overflow-y-auto">
                      {filteredFoods.map((food, idx) => (
                        <button
                          key={idx}
                          onClick={() => setSelectedFood(food)}
                          className={`w-full text-left p-4 rounded-lg border-2 transition ${
                            selectedFood?.name === food.name
                              ? 'border-purple-600 bg-purple-50'
                              : 'border-gray-200 hover:border-purple-300'
                          }`}
                        >
                          <h4 className="font-semibold text-gray-900">{food.name}</h4>
                          <p className="text-sm text-gray-600">
                            {food.calories} cal â€¢ {food.protein}g P â€¢ {food.carbs}g C â€¢ {food.fats}g F
                          </p>
                        </button>
                      ))}
                    </div>

                    {selectedFood && (
                      <div className="mb-6">
                        <label className="block text-sm font-medium text-gray-700 mb-2">
                          Serving size multiplier
                        </label>
                        <input
                          type="number"
                          step="0.5"
                          min="0.5"
                          value={multiplier}
                          onChange={(e) => setMultiplier(parseFloat(e.target.value))}
                          className="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-600"
                        />
                        <p className="text-sm text-gray-600 mt-2">
                          Total: {Math.round(selectedFood.calories * multiplier)} cal
                        </p>
                      </div>
                    )}

                    <div className="flex space-x-4">
                      <button
                        onClick={() => {
                          setShowAddFood(false);
                          setSelectedFood(null);
                          setSearchTerm('');
                        }}
                        className="flex-1 px-6 py-3 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition font-medium"
                      >
                        Cancel
                      </button>
                      <button
                        onClick={handleAddFood}
                        disabled={!selectedFood}
                        className="flex-1 px-6 py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition font-medium disabled:bg-gray-300 disabled:cursor-not-allowed"
                      >
                        Add Food
                      </button>
                    </div>
                  </div>
                </div>
              )}
            </div>
          );
        }

        // Render the app
        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<YunityStudio />);
    </script>
</body>
</html>
