<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Yunity Studio - Your Personal Fitness & Nutrition Platform</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap');
        
        body {
            font-family: 'Inter', sans-serif;
        }
        
        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        
        .card-hover {
            transition: transform 0.2s, box-shadow 0.2s;
        }
        
        .card-hover:hover {
            transform: translateY(-4px);
            box-shadow: 0 12px 24px rgba(0,0,0,0.15);
        }
        
        .progress-bar {
            transition: width 0.3s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .fade-in {
            animation: fadeIn 0.5s ease;
        }
    </style>
</head>
<body class="bg-gray-50">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // Utility functions
        const calculateBMR = (weight, height, age, gender) => {
            if (gender === 'male') {
                return 10 * weight + 6.25 * height - 5 * age + 5;
            } else {
                return 10 * weight + 6.25 * height - 5 * age - 161;
            }
        };

        const calculateTDEE = (bmr, activityLevel) => {
            const multipliers = {
                sedentary: 1.2,
                light: 1.375,
                moderate: 1.55,
                active: 1.725,
                veryActive: 1.9
            };
            return bmr * multipliers[activityLevel];
        };

        const adjustCaloriesForGoal = (tdee, goal) => {
            switch(goal) {
                case 'loss': return tdee - 500;
                case 'gain': return tdee + 500;
                default: return tdee;
            }
        };

        const getMacroDistribution = (goal) => {
            switch(goal) {
                case 'loss':
                    return { protein: 0.40, carbs: 0.30, fats: 0.30 };
                case 'gain':
                    return { protein: 0.30, carbs: 0.40, fats: 0.30 };
                default:
                    return { protein: 0.25, carbs: 0.45, fats: 0.30 };
            }
        };

        // Food Database
        const FOOD_DATABASE = [
            // Proteins
            { name: "Chicken Breast", calories: 165, protein: 31, carbs: 0, fats: 3.6, category: "protein" },
            { name: "Salmon", calories: 206, protein: 22, carbs: 0, fats: 13, category: "protein" },
            { name: "Eggs (2 large)", calories: 140, protein: 12, carbs: 1, fats: 10, category: "protein" },
            { name: "Greek Yogurt", calories: 100, protein: 17, carbs: 6, fats: 0.7, category: "protein" },
            { name: "Tuna", calories: 132, protein: 28, carbs: 0, fats: 1.3, category: "protein" },
            
            // Carbs
            { name: "Brown Rice", calories: 216, protein: 5, carbs: 45, fats: 1.8, category: "carbs" },
            { name: "Sweet Potato", calories: 112, protein: 2, carbs: 26, fats: 0.1, category: "carbs" },
            { name: "Oatmeal", calories: 158, protein: 6, carbs: 27, fats: 3, category: "carbs" },
            { name: "Whole Wheat Bread", calories: 80, protein: 4, carbs: 14, fats: 1, category: "carbs" },
            { name: "Quinoa", calories: 222, protein: 8, carbs: 39, fats: 3.6, category: "carbs" },
            
            // Vegetables
            { name: "Broccoli", calories: 55, protein: 4, carbs: 11, fats: 0.6, category: "vegetables" },
            { name: "Spinach", calories: 23, protein: 3, carbs: 4, fats: 0.4, category: "vegetables" },
            { name: "Avocado", calories: 240, protein: 3, carbs: 13, fats: 22, category: "vegetables" },
            { name: "Tomato", calories: 22, protein: 1, carbs: 5, fats: 0.2, category: "vegetables" },
            
            // Snacks
            { name: "Almonds (handful)", calories: 160, protein: 6, carbs: 6, fats: 14, category: "snacks" },
            { name: "Banana", calories: 105, protein: 1, carbs: 27, fats: 0.4, category: "snacks" },
            { name: "Apple", calories: 95, protein: 0.5, carbs: 25, fats: 0.3, category: "snacks" },
            { name: "Protein Shake", calories: 120, protein: 24, carbs: 3, fats: 1, category: "snacks" },
        ];

        // Exercise Database
        const EXERCISE_DATABASE = {
            chest: [
                { name: "Bench Press", sets: 3, reps: "8-10", rest: 90, difficulty: "intermediate" },
                { name: "Push-ups", sets: 3, reps: "12-15", rest: 60, difficulty: "beginner" },
                { name: "Dumbbell Flyes", sets: 3, reps: "10-12", rest: 60, difficulty: "beginner" },
                { name: "Incline Press", sets: 3, reps: "8-10", rest: 90, difficulty: "intermediate" },
            ],
            back: [
                { name: "Pull-ups", sets: 3, reps: "6-10", rest: 90, difficulty: "intermediate" },
                { name: "Bent Over Rows", sets: 3, reps: "8-10", rest: 90, difficulty: "intermediate" },
                { name: "Lat Pulldowns", sets: 3, reps: "10-12", rest: 60, difficulty: "beginner" },
                { name: "Deadlifts", sets: 3, reps: "6-8", rest: 120, difficulty: "intermediate" },
            ],
            shoulders: [
                { name: "Overhead Press", sets: 3, reps: "8-10", rest: 90, difficulty: "intermediate" },
                { name: "Lateral Raises", sets: 3, reps: "12-15", rest: 60, difficulty: "beginner" },
                { name: "Front Raises", sets: 3, reps: "10-12", rest: 60, difficulty: "beginner" },
                { name: "Face Pulls", sets: 3, reps: "15-20", rest: 45, difficulty: "beginner" },
            ],
            arms: [
                { name: "Bicep Curls", sets: 3, reps: "10-12", rest: 60, difficulty: "beginner" },
                { name: "Tricep Dips", sets: 3, reps: "10-12", rest: 60, difficulty: "beginner" },
                { name: "Hammer Curls", sets: 3, reps: "10-12", rest: 60, difficulty: "beginner" },
                { name: "Tricep Extensions", sets: 3, reps: "10-12", rest: 60, difficulty: "beginner" },
            ],
            core: [
                { name: "Planks", sets: 3, reps: "45-60s", rest: 45, difficulty: "beginner" },
                { name: "Russian Twists", sets: 3, reps: "20", rest: 45, difficulty: "beginner" },
                { name: "Leg Raises", sets: 3, reps: "12-15", rest: 60, difficulty: "intermediate" },
                { name: "Mountain Climbers", sets: 3, reps: "20", rest: 45, difficulty: "beginner" },
            ],
            legs: [
                { name: "Squats", sets: 4, reps: "8-10", rest: 120, difficulty: "intermediate" },
                { name: "Lunges", sets: 3, reps: "10-12", rest: 60, difficulty: "beginner" },
                { name: "Leg Press", sets: 3, reps: "10-12", rest: 90, difficulty: "beginner" },
                { name: "Romanian Deadlifts", sets: 3, reps: "8-10", rest: 90, difficulty: "intermediate" },
            ],
        };

        // Landing Page Component
        const LandingPage = ({ onGetStarted }) => {
            return (
                <div className="min-h-screen">
                    {/* Hero Section */}
                    <div className="gradient-bg text-white">
                        <nav className="container mx-auto px-6 py-4">
                            <div className="flex justify-between items-center">
                                <h1 className="text-2xl font-bold">Yunity Studio</h1>
                                <button 
                                    onClick={onGetStarted}
                                    className="bg-white text-purple-600 px-6 py-2 rounded-full font-semibold hover:bg-gray-100 transition"
                                >
                                    Get Started
                                </button>
                            </div>
                        </nav>
                        
                        <div className="container mx-auto px-6 py-20 text-center">
                            <h2 className="text-5xl font-bold mb-6 fade-in">
                                Your Personal Fitness & Nutrition Platform
                            </h2>
                            <p className="text-xl mb-8 text-gray-100 max-w-2xl mx-auto fade-in">
                                Get customized diet plans, targeted workout routines, and track your progress all in one place
                            </p>
                            <button 
                                onClick={onGetStarted}
                                className="bg-white text-purple-600 px-8 py-4 rounded-full text-lg font-semibold hover:bg-gray-100 transition transform hover:scale-105"
                            >
                                Start Your Journey ‚Üí
                            </button>
                        </div>
                    </div>

                    {/* Features Section */}
                    <div className="container mx-auto px-6 py-20">
                        <h3 className="text-3xl font-bold text-center mb-12 text-gray-800">What You Get</h3>
                        <div className="grid md:grid-cols-3 gap-8">
                            <div className="bg-white p-8 rounded-xl shadow-lg card-hover">
                                <div className="text-4xl mb-4">üçΩÔ∏è</div>
                                <h4 className="text-xl font-bold mb-3 text-gray-800">Customized Diet Plans</h4>
                                <p className="text-gray-600">
                                    Get personalized calorie and macro targets based on your body, activity level, and goals
                                </p>
                            </div>
                            
                            <div className="bg-white p-8 rounded-xl shadow-lg card-hover">
                                <div className="text-4xl mb-4">üí™</div>
                                <h4 className="text-xl font-bold mb-3 text-gray-800">Targeted Workouts</h4>
                                <p className="text-gray-600">
                                    Receive workout plans designed for your specific body parts and fitness level
                                </p>
                            </div>
                            
                            <div className="bg-white p-8 rounded-xl shadow-lg card-hover">
                                <div className="text-4xl mb-4">üìä</div>
                                <h4 className="text-xl font-bold mb-3 text-gray-800">Daily Tracking</h4>
                                <p className="text-gray-600">
                                    Monitor your food intake and progress with easy-to-use tracking tools
                                </p>
                            </div>
                        </div>
                    </div>

                    {/* CTA Section */}
                    <div className="gradient-bg text-white py-16">
                        <div className="container mx-auto px-6 text-center">
                            <h3 className="text-3xl font-bold mb-6">Ready to Transform Your Health?</h3>
                            <button 
                                onClick={onGetStarted}
                                className="bg-white text-purple-600 px-8 py-4 rounded-full text-lg font-semibold hover:bg-gray-100 transition transform hover:scale-105"
                            >
                                Get Started Free ‚Üí
                            </button>
                        </div>
                    </div>
                </div>
            );
        };

        // Onboarding Component
        const Onboarding = ({ onComplete }) => {
            const [step, setStep] = useState(1);
            const [formData, setFormData] = useState({
                age: '',
                gender: 'male',
                height: '',
                weight: '',
                activityLevel: 'moderate',
                goal: 'maintenance',
                targetBodyParts: []
            });

            const updateField = (field, value) => {
                setFormData(prev => ({ ...prev, [field]: value }));
            };

            const toggleBodyPart = (part) => {
                setFormData(prev => ({
                    ...prev,
                    targetBodyParts: prev.targetBodyParts.includes(part)
                        ? prev.targetBodyParts.filter(p => p !== part)
                        : [...prev.targetBodyParts, part]
                }));
            };

            const handleComplete = () => {
                if (formData.targetBodyParts.length === 0) {
                    alert('Please select at least one body part to train');
                    return;
                }
                onComplete(formData);
            };

            return (
                <div className="min-h-screen gradient-bg flex items-center justify-center p-6">
                    <div className="bg-white rounded-2xl shadow-2xl max-w-2xl w-full p-8 fade-in">
                        <div className="mb-8">
                            <div className="flex justify-between items-center mb-4">
                                <h2 className="text-2xl font-bold text-gray-800">Let's Get to Know You</h2>
                                <span className="text-sm text-gray-500">Step {step} of 3</span>
                            </div>
                            <div className="w-full bg-gray-200 rounded-full h-2">
                                <div 
                                    className="bg-purple-600 h-2 rounded-full progress-bar"
                                    style={{ width: `${(step / 3) * 100}%` }}
                                ></div>
                            </div>
                        </div>

                        {step === 1 && (
                            <div className="space-y-6">
                                <h3 className="text-xl font-semibold text-gray-800 mb-4">Basic Information</h3>
                                
                                <div>
                                    <label className="block text-sm font-medium text-gray-700 mb-2">Age</label>
                                    <input
                                        type="number"
                                        value={formData.age}
                                        onChange={(e) => updateField('age', e.target.value)}
                                        className="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"
                                        placeholder="Enter your age"
                                    />
                                </div>

                                <div>
                                    <label className="block text-sm font-medium text-gray-700 mb-2">Gender</label>
                                    <div className="grid grid-cols-2 gap-4">
                                        <button
                                            onClick={() => updateField('gender', 'male')}
                                            className={`py-3 px-6 rounded-lg font-medium transition ${
                                                formData.gender === 'male'
                                                    ? 'bg-purple-600 text-white'
                                                    : 'bg-gray-100 text-gray-700 hover:bg-gray-200'
                                            }`}
                                        >
                                            Male
                                        </button>
                                        <button
                                            onClick={() => updateField('gender', 'female')}
                                            className={`py-3 px-6 rounded-lg font-medium transition ${
                                                formData.gender === 'female'
                                                    ? 'bg-purple-600 text-white'
                                                    : 'bg-gray-100 text-gray-700 hover:bg-gray-200'
                                            }`}
                                        >
                                            Female
                                        </button>
                                    </div>
                                </div>

                                <div className="grid grid-cols-2 gap-4">
                                    <div>
                                        <label className="block text-sm font-medium text-gray-700 mb-2">Height (cm)</label>
                                        <input
                                            type="number"
                                            value={formData.height}
                                            onChange={(e) => updateField('height', e.target.value)}
                                            className="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"
                                            placeholder="170"
                                        />
                                    </div>
                                    <div>
                                        <label className="block text-sm font-medium text-gray-700 mb-2">Weight (kg)</label>
                                        <input
                                            type="number"
                                            value={formData.weight}
                                            onChange={(e) => updateField('weight', e.target.value)}
                                            className="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"
                                            placeholder="70"
                                        />
                                    </div>
                                </div>

                                <button
                                    onClick={() => setStep(2)}
                                    disabled={!formData.age || !formData.height || !formData.weight}
                                    className="w-full bg-purple-600 text-white py-3 rounded-lg font-semibold hover:bg-purple-700 transition disabled:bg-gray-300 disabled:cursor-not-allowed"
                                >
                                    Next ‚Üí
                                </button>
                            </div>
                        )}

                        {step === 2 && (
                            <div className="space-y-6">
                                <h3 className="text-xl font-semibold text-gray-800 mb-4">Activity & Goals</h3>
                                
                                <div>
                                    <label className="block text-sm font-medium text-gray-700 mb-2">Activity Level</label>
                                    <select
                                        value={formData.activityLevel}
                                        onChange={(e) => updateField('activityLevel', e.target.value)}
                                        className="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"
                                    >
                                        <option value="sedentary">Sedentary (little or no exercise)</option>
                                        <option value="light">Lightly Active (1-3 days/week)</option>
                                        <option value="moderate">Moderately Active (3-5 days/week)</option>
                                        <option value="active">Very Active (6-7 days/week)</option>
                                        <option value="veryActive">Extremely Active (2x per day)</option>
                                    </select>
                                </div>

                                <div>
                                    <label className="block text-sm font-medium text-gray-700 mb-2">Fitness Goal</label>
                                    <div className="grid grid-cols-3 gap-4">
                                        <button
                                            onClick={() => updateField('goal', 'loss')}
                                            className={`py-3 px-4 rounded-lg font-medium transition ${
                                                formData.goal === 'loss'
                                                    ? 'bg-purple-600 text-white'
                                                    : 'bg-gray-100 text-gray-700 hover:bg-gray-200'
                                            }`}
                                        >
                                            Weight Loss
                                        </button>
                                        <button
                                            onClick={() => updateField('goal', 'maintenance')}
                                            className={`py-3 px-4 rounded-lg font-medium transition ${
                                                formData.goal === 'maintenance'
                                                    ? 'bg-purple-600 text-white'
                                                    : 'bg-gray-100 text-gray-700 hover:bg-gray-200'
                                            }`}
                                        >
                                            Maintain
                                        </button>
                                        <button
                                            onClick={() => updateField('goal', 'gain')}
                                            className={`py-3 px-4 rounded-lg font-medium transition ${
                                                formData.goal === 'gain'
                                                    ? 'bg-purple-600 text-white'
                                                    : 'bg-gray-100 text-gray-700 hover:bg-gray-200'
                                            }`}
                                        >
                                            Muscle Gain
                                        </button>
                                    </div>
                                </div>

                                <div className="flex gap-4">
                                    <button
                                        onClick={() => setStep(1)}
                                        className="flex-1 bg-gray-200 text-gray-700 py-3 rounded-lg font-semibold hover:bg-gray-300 transition"
                                    >
                                        ‚Üê Back
                                    </button>
                                    <button
                                        onClick={() => setStep(3)}
                                        className="flex-1 bg-purple-600 text-white py-3 rounded-lg font-semibold hover:bg-purple-700 transition"
                                    >
                                        Next ‚Üí
                                    </button>
                                </div>
                            </div>
                        )}

                        {step === 3 && (
                            <div className="space-y-6">
                                <h3 className="text-xl font-semibold text-gray-800 mb-4">Target Body Parts</h3>
                                <p className="text-gray-600 mb-4">Select the areas you want to focus on:</p>
                                
                                <div className="grid grid-cols-2 gap-4">
                                    {['chest', 'back', 'shoulders', 'arms', 'core', 'legs'].map(part => (
                                        <button
                                            key={part}
                                            onClick={() => toggleBodyPart(part)}
                                            className={`py-4 px-6 rounded-lg font-medium transition capitalize ${
                                                formData.targetBodyParts.includes(part)
                                                    ? 'bg-purple-600 text-white'
                                                    : 'bg-gray-100 text-gray-700 hover:bg-gray-200'
                                            }`}
                                        >
                                            {part}
                                        </button>
                                    ))}
                                </div>

                                <div className="flex gap-4 mt-8">
                                    <button
                                        onClick={() => setStep(2)}
                                        className="flex-1 bg-gray-200 text-gray-700 py-3 rounded-lg font-semibold hover:bg-gray-300 transition"
                                    >
                                        ‚Üê Back
                                    </button>
                                    <button
                                        onClick={handleComplete}
                                        className="flex-1 bg-purple-600 text-white py-3 rounded-lg font-semibold hover:bg-purple-700 transition"
                                    >
                                        Complete Setup ‚úì
                                    </button>
                                </div>
                            </div>
                        )}
                    </div>
                </div>
            );
        };

        // Dashboard Component
        const Dashboard = ({ userData, dietPlan, workoutPlan, foodLogs, onNavigate }) => {
            const today = new Date().toISOString().split('T')[0];
            const todayLogs = foodLogs.filter(log => log.date === today);
            
            const todayTotals = todayLogs.reduce((acc, log) => ({
                calories: acc.calories + log.calories,
                protein: acc.protein + log.protein,
                carbs: acc.carbs + log.carbs,
                fats: acc.fats + log.fats
            }), { calories: 0, protein: 0, carbs: 0, fats: 0 });

            const caloriePercentage = (todayTotals.calories / dietPlan.calories) * 100;
            const proteinPercentage = (todayTotals.protein / dietPlan.protein) * 100;
            const carbsPercentage = (todayTotals.carbs / dietPlan.carbs) * 100;
            const fatsPercentage = (todayTotals.fats / dietPlan.fats) * 100;

            return (
                <div className="min-h-screen bg-gray-50">
                    {/* Header */}
                    <div className="gradient-bg text-white">
                        <div className="container mx-auto px-6 py-6">
                            <h1 className="text-3xl font-bold">Welcome to Yunity Studio</h1>
                            <p className="text-gray-100 mt-2">Your personalized fitness dashboard</p>
                        </div>
                    </div>

                    <div className="container mx-auto px-6 py-8">
                        {/* Quick Stats */}
                        <div className="grid md:grid-cols-4 gap-6 mb-8">
                            <div className="bg-white p-6 rounded-xl shadow-md">
                                <div className="text-3xl mb-2">üî•</div>
                                <div className="text-2xl font-bold text-gray-800">{Math.round(todayTotals.calories)}</div>
                                <div className="text-sm text-gray-600">Calories Today</div>
                            </div>
                            
                            <div className="bg-white p-6 rounded-xl shadow-md">
                                <div className="text-3xl mb-2">üéØ</div>
                                <div className="text-2xl font-bold text-gray-800">{dietPlan.calories}</div>
                                <div className="text-sm text-gray-600">Daily Target</div>
                            </div>
                            
                            <div className="bg-white p-6 rounded-xl shadow-md">
                                <div className="text-3xl mb-2">üí™</div>
                                <div className="text-2xl font-bold text-gray-800">{workoutPlan.frequency}</div>
                                <div className="text-sm text-gray-600">Workouts/Week</div>
                            </div>
                            
                            <div className="bg-white p-6 rounded-xl shadow-md">
                                <div className="text-3xl mb-2">üìà</div>
                                <div className="text-2xl font-bold text-gray-800">{userData.weight} kg</div>
                                <div className="text-sm text-gray-600">Current Weight</div>
                            </div>
                        </div>

                        {/* Today's Progress */}
                        <div className="bg-white rounded-xl shadow-md p-6 mb-8">
                            <h2 className="text-xl font-bold text-gray-800 mb-6">Today's Nutrition Progress</h2>
                            
                            <div className="space-y-4">
                                <div>
                                    <div className="flex justify-between mb-2">
                                        <span className="text-sm font-medium text-gray-700">Calories</span>
                                        <span className="text-sm text-gray-600">
                                            {Math.round(todayTotals.calories)} / {dietPlan.calories}
                                        </span>
                                    </div>
                                    <div className="w-full bg-gray-200 rounded-full h-3">
                                        <div 
                                            className="bg-purple-600 h-3 rounded-full progress-bar"
                                            style={{ width: `${Math.min(caloriePercentage, 100)}%` }}
                                        ></div>
                                    </div>
                                </div>

                                <div>
                                    <div className="flex justify-between mb-2">
                                        <span className="text-sm font-medium text-gray-700">Protein</span>
                                        <span className="text-sm text-gray-600">
                                            {Math.round(todayTotals.protein)}g / {dietPlan.protein}g
                                        </span>
                                    </div>
                                    <div className="w-full bg-gray-200 rounded-full h-3">
                                        <div 
                                            className="bg-blue-500 h-3 rounded-full progress-bar"
                                            style={{ width: `${Math.min(proteinPercentage, 100)}%` }}
                                        ></div>
                                    </div>
                                </div>

                                <div>
                                    <div className="flex justify-between mb-2">
                                        <span className="text-sm font-medium text-gray-700">Carbs</span>
                                        <span className="text-sm text-gray-600">
                                            {Math.round(todayTotals.carbs)}g / {dietPlan.carbs}g
                                        </span>
                                    </div>
                                    <div className="w-full bg-gray-200 rounded-full h-3">
                                        <div 
                                            className="bg-green-500 h-3 rounded-full progress-bar"
                                            style={{ width: `${Math.min(carbsPercentage, 100)}%` }}
                                        ></div>
                                    </div>
                                </div>

                                <div>
                                    <div className="flex justify-between mb-2">
                                        <span className="text-sm font-medium text-gray-700">Fats</span>
                                        <span className="text-sm text-gray-600">
                                            {Math.round(todayTotals.fats)}g / {dietPlan.fats}g
                                        </span>
                                    </div>
                                    <div className="w-full bg-gray-200 rounded-full h-3">
                                        <div 
                                            className="bg-yellow-500 h-3 rounded-full progress-bar"
                                            style={{ width: `${Math.min(fatsPercentage, 100)}%` }}
                                        ></div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        {/* Quick Actions */}
                        <div className="grid md:grid-cols-3 gap-6">
                            <button
                                onClick={() => onNavigate('diet')}
                                className="bg-white p-8 rounded-xl shadow-md hover:shadow-lg transition card-hover text-left"
                            >
                                <div className="text-4xl mb-3">üçΩÔ∏è</div>
                                <h3 className="text-lg font-bold text-gray-800 mb-2">Diet Plan</h3>
                                <p className="text-gray-600 text-sm">View your personalized nutrition plan</p>
                            </button>

                            <button
                                onClick={() => onNavigate('workout')}
                                className="bg-white p-8 rounded-xl shadow-md hover:shadow-lg transition card-hover text-left"
                            >
                                <div className="text-4xl mb-3">üí™</div>
                                <h3 className="text-lg font-bold text-gray-800 mb-2">Workout Plan</h3>
                                <p className="text-gray-600 text-sm">Check your weekly workout schedule</p>
                            </button>

                            <button
                                onClick={() => onNavigate('tracker')}
                                className="bg-white p-8 rounded-xl shadow-md hover:shadow-lg transition card-hover text-left"
                            >
                                <div className="text-4xl mb-3">üìä</div>
                                <h3 className="text-lg font-bold text-gray-800 mb-2">Food Tracker</h3>
                                <p className="text-gray-600 text-sm">Log your meals and track progress</p>
                            </button>
                        </div>
                    </div>
                </div>
            );
        };

        // Diet Plan Component
        const DietPlan = ({ userData, dietPlan, onBack }) => {
            const goalText = {
                loss: 'Weight Loss',
                gain: 'Muscle Gain',
                maintenance: 'Weight Maintenance'
            };

            return (
                <div className="min-h-screen bg-gray-50">
                    <div className="gradient-bg text-white">
                        <div className="container mx-auto px-6 py-6">
                            <button onClick={onBack} className="text-white mb-4 hover:underline">
                                ‚Üê Back to Dashboard
                            </button>
                            <h1 className="text-3xl font-bold">Your Personalized Diet Plan</h1>
                        </div>
                    </div>

                    <div className="container mx-auto px-6 py-8 max-w-4xl">
                        {/* Summary Card */}
                        <div className="bg-white rounded-xl shadow-lg p-8 mb-8">
                            <h2 className="text-2xl font-bold text-gray-800 mb-6">Daily Targets</h2>
                            
                            <div className="grid md:grid-cols-2 gap-8 mb-6">
                                <div>
                                    <div className="text-sm text-gray-600 mb-2">Fitness Goal</div>
                                    <div className="text-xl font-semibold text-purple-600">{goalText[userData.goal]}</div>
                                </div>
                                <div>
                                    <div className="text-sm text-gray-600 mb-2">Activity Level</div>
                                    <div className="text-xl font-semibold text-gray-800 capitalize">{userData.activityLevel}</div>
                                </div>
                            </div>

                            <div className="grid grid-cols-2 md:grid-cols-4 gap-6">
                                <div className="bg-purple-50 p-6 rounded-lg text-center">
                                    <div className="text-3xl font-bold text-purple-600">{dietPlan.calories}</div>
                                    <div className="text-sm text-gray-600 mt-2">Calories</div>
                                </div>
                                <div className="bg-blue-50 p-6 rounded-lg text-center">
                                    <div className="text-3xl font-bold text-blue-600">{dietPlan.protein}g</div>
                                    <div className="text-sm text-gray-600 mt-2">Protein</div>
                                </div>
                                <div className="bg-green-50 p-6 rounded-lg text-center">
                                    <div className="text-3xl font-bold text-green-600">{dietPlan.carbs}g</div>
                                    <div className="text-sm text-gray-600 mt-2">Carbs</div>
                                </div>
                                <div className="bg-yellow-50 p-6 rounded-lg text-center">
                                    <div className="text-3xl font-bold text-yellow-600">{dietPlan.fats}g</div>
                                    <div className="text-sm text-gray-600 mt-2">Fats</div>
                                </div>
                            </div>
                        </div>

                        {/* Meal Structure */}
                        <div className="bg-white rounded-xl shadow-lg p-8 mb-8">
                            <h2 className="text-2xl font-bold text-gray-800 mb-6">Meal Structure</h2>
                            
                            <div className="space-y-6">
                                <div className="border-l-4 border-purple-500 pl-6">
                                    <h3 className="text-lg font-semibold text-gray-800 mb-2">Breakfast</h3>
                                    <p className="text-gray-600 mb-2">{Math.round(dietPlan.calories * 0.3)} calories</p>
                                    <div className="text-sm text-gray-600">
                                        <p>‚Ä¢ Oatmeal with berries and almonds</p>
                                        <p>‚Ä¢ Greek yogurt with honey</p>
                                        <p>‚Ä¢ Eggs with whole wheat toast</p>
                                    </div>
                                </div>

                                <div className="border-l-4 border-blue-500 pl-6">
                                    <h3 className="text-lg font-semibold text-gray-800 mb-2">Lunch</h3>
                                    <p className="text-gray-600 mb-2">{Math.round(dietPlan.calories * 0.35)} calories</p>
                                    <div className="text-sm text-gray-600">
                                        <p>‚Ä¢ Grilled chicken with quinoa and vegetables</p>
                                        <p>‚Ä¢ Salmon with brown rice and broccoli</p>
                                        <p>‚Ä¢ Turkey wrap with mixed greens</p>
                                    </div>
                                </div>

                                <div className="border-l-4 border-green-500 pl-6">
                                    <h3 className="text-lg font-semibold text-gray-800 mb-2">Dinner</h3>
                                    <p className="text-gray-600 mb-2">{Math.round(dietPlan.calories * 0.30)} calories</p>
                                    <div className="text-sm text-gray-600">
                                        <p>‚Ä¢ Lean beef with sweet potato and spinach</p>
                                        <p>‚Ä¢ Tuna steak with vegetables</p>
                                        <p>‚Ä¢ Chicken stir-fry with brown rice</p>
                                    </div>
                                </div>

                                <div className="border-l-4 border-yellow-500 pl-6">
                                    <h3 className="text-lg font-semibold text-gray-800 mb-2">Snacks</h3>
                                    <p className="text-gray-600 mb-2">{Math.round(dietPlan.calories * 0.05)} calories (optional)</p>
                                    <div className="text-sm text-gray-600">
                                        <p>‚Ä¢ Protein shake</p>
                                        <p>‚Ä¢ Handful of almonds</p>
                                        <p>‚Ä¢ Apple with peanut butter</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        {/* Tips */}
                        <div className="bg-purple-50 rounded-xl p-6">
                            <h3 className="text-lg font-semibold text-gray-800 mb-4">üí° Pro Tips</h3>
                            <ul className="space-y-2 text-gray-700">
                                <li>‚Ä¢ Drink at least 8 glasses of water daily</li>
                                <li>‚Ä¢ Eat protein with every meal for better satiety</li>
                                <li>‚Ä¢ Prepare meals in advance to stay on track</li>
                                <li>‚Ä¢ Adjust portions based on your hunger and energy levels</li>
                            </ul>
                        </div>
                    </div>
                </div>
            );
        };

        // Workout Plan Component
        const WorkoutPlan = ({ workoutPlan, onBack }) => {
            const [selectedDay, setSelectedDay] = useState(0);

            return (
                <div className="min-h-screen bg-gray-50">
                    <div className="gradient-bg text-white">
                        <div className="container mx-auto px-6 py-6">
                            <button onClick={onBack} className="text-white mb-4 hover:underline">
                                ‚Üê Back to Dashboard
                            </button>
                            <h1 className="text-3xl font-bold">Your Workout Plan</h1>
                        </div>
                    </div>

                    <div className="container mx-auto px-6 py-8 max-w-6xl">
                        {/* Plan Overview */}
                        <div className="bg-white rounded-xl shadow-lg p-8 mb-8">
                            <h2 className="text-2xl font-bold text-gray-800 mb-4">Weekly Schedule</h2>
                            <p className="text-gray-600 mb-6">
                                Training {workoutPlan.frequency} days per week ‚Ä¢ Focus: {workoutPlan.targetParts.join(', ')}
                            </p>
                            
                            <div className="flex flex-wrap gap-3">
                                {workoutPlan.schedule.map((day, index) => (
                                    <button
                                        key={index}
                                        onClick={() => setSelectedDay(index)}
                                        className={`px-6 py-3 rounded-lg font-medium transition ${
                                            selectedDay === index
                                                ? 'bg-purple-600 text-white'
                                                : 'bg-gray-100 text-gray-700 hover:bg-gray-200'
                                        }`}
                                    >
                                        {day.day}
                                    </button>
                                ))}
                            </div>
                        </div>

                        {/* Daily Workout */}
                        <div className="bg-white rounded-xl shadow-lg p-8">
                            <h2 className="text-2xl font-bold text-gray-800 mb-2">
                                {workoutPlan.schedule[selectedDay].day}
                            </h2>
                            <p className="text-gray-600 mb-6 capitalize">
                                Focus: {workoutPlan.schedule[selectedDay].focus}
                            </p>

                            <div className="space-y-4">
                                {workoutPlan.schedule[selectedDay].exercises.map((exercise, index) => (
                                    <div key={index} className="border border-gray-200 rounded-lg p-6 hover:border-purple-300 transition">
                                        <div className="flex justify-between items-start mb-3">
                                            <h3 className="text-lg font-semibold text-gray-800">{exercise.name}</h3>
                                            <span className="bg-purple-100 text-purple-700 px-3 py-1 rounded-full text-sm font-medium">
                                                {exercise.difficulty}
                                            </span>
                                        </div>
                                        
                                        <div className="grid grid-cols-3 gap-4 text-center">
                                            <div className="bg-blue-50 rounded-lg p-3">
                                                <div className="text-2xl font-bold text-blue-600">{exercise.sets}</div>
                                                <div className="text-xs text-gray-600 mt-1">Sets</div>
                                            </div>
                                            <div className="bg-green-50 rounded-lg p-3">
                                                <div className="text-2xl font-bold text-green-600">{exercise.reps}</div>
                                                <div className="text-xs text-gray-600 mt-1">Reps</div>
                                            </div>
                                            <div className="bg-yellow-50 rounded-lg p-3">
                                                <div className="text-2xl font-bold text-yellow-600">{exercise.rest}s</div>
                                                <div className="text-xs text-gray-600 mt-1">Rest</div>
                                            </div>
                                        </div>
                                    </div>
                                ))}
                            </div>

                            <div className="mt-6 bg-purple-50 rounded-lg p-4">
                                <p className="text-sm text-gray-700">
                                    <strong>üí° Tip:</strong> Warm up for 5-10 minutes before starting and stretch after your workout for best results.
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        // Food Tracker Component
        const FoodTracker = ({ foodLogs, dietPlan, onAddFood, onBack }) => {
            const [selectedDate, setSelectedDate] = useState(new Date().toISOString().split('T')[0]);
            const [showAddModal, setShowAddModal] = useState(false);
            const [searchQuery, setSearchQuery] = useState('');
            const [selectedFood, setSelectedFood] = useState(null);
            const [mealType, setMealType] = useState('breakfast');
            const [portion, setPortion] = useState('1');

            const dateLogs = foodLogs.filter(log => log.date === selectedDate);
            const dayTotals = dateLogs.reduce((acc, log) => ({
                calories: acc.calories + log.calories,
                protein: acc.protein + log.protein,
                carbs: acc.carbs + log.carbs,
                fats: acc.fats + log.fats
            }), { calories: 0, protein: 0, carbs: 0, fats: 0 });

            const filteredFoods = FOOD_DATABASE.filter(food =>
                food.name.toLowerCase().includes(searchQuery.toLowerCase())
            );

            const handleAddFood = () => {
                if (!selectedFood) return;
                
                const multiplier = parseFloat(portion) || 1;
                onAddFood({
                    date: selectedDate,
                    mealType,
                    name: selectedFood.name,
                    calories: selectedFood.calories * multiplier,
                    protein: selectedFood.protein * multiplier,
                    carbs: selectedFood.carbs * multiplier,
                    fats: selectedFood.fats * multiplier,
                });

                setShowAddModal(false);
                setSelectedFood(null);
                setSearchQuery('');
                setPortion('1');
            };

            return (
                <div className="min-h-screen bg-gray-50">
                    <div className="gradient-bg text-white">
                        <div className="container mx-auto px-6 py-6">
                            <button onClick={onBack} className="text-white mb-4 hover:underline">
                                ‚Üê Back to Dashboard
                            </button>
                            <h1 className="text-3xl font-bold">Food Tracker</h1>
                        </div>
                    </div>

                    <div className="container mx-auto px-6 py-8 max-w-4xl">
                        {/* Date Selector & Add Button */}
                        <div className="bg-white rounded-xl shadow-lg p-6 mb-8">
                            <div className="flex justify-between items-center">
                                <input
                                    type="date"
                                    value={selectedDate}
                                    onChange={(e) => setSelectedDate(e.target.value)}
                                    className="px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500"
                                />
                                <button
                                    onClick={() => setShowAddModal(true)}
                                    className="bg-purple-600 text-white px-6 py-2 rounded-lg font-semibold hover:bg-purple-700 transition"
                                >
                                    + Add Food
                                </button>
                            </div>
                        </div>

                        {/* Daily Summary */}
                        <div className="bg-white rounded-xl shadow-lg p-8 mb-8">
                            <h2 className="text-xl font-bold text-gray-800 mb-6">Daily Summary</h2>
                            
                            <div className="grid grid-cols-2 md:grid-cols-4 gap-4 mb-6">
                                <div className="text-center">
                                    <div className="text-2xl font-bold text-purple-600">{Math.round(dayTotals.calories)}</div>
                                    <div className="text-sm text-gray-600">of {dietPlan.calories} cal</div>
                                </div>
                                <div className="text-center">
                                    <div className="text-2xl font-bold text-blue-600">{Math.round(dayTotals.protein)}g</div>
                                    <div className="text-sm text-gray-600">of {dietPlan.protein}g protein</div>
                                </div>
                                <div className="text-center">
                                    <div className="text-2xl font-bold text-green-600">{Math.round(dayTotals.carbs)}g</div>
                                    <div className="text-sm text-gray-600">of {dietPlan.carbs}g carbs</div>
                                </div>
                                <div className="text-center">
                                    <div className="text-2xl font-bold text-yellow-600">{Math.round(dayTotals.fats)}g</div>
                                    <div className="text-sm text-gray-600">of {dietPlan.fats}g fats</div>
                                </div>
                            </div>

                            <div className="space-y-3">
                                <div>
                                    <div className="flex justify-between mb-1 text-sm">
                                        <span className="text-gray-700">Calories</span>
                                        <span className="text-gray-600">
                                            {Math.round((dayTotals.calories / dietPlan.calories) * 100)}%
                                        </span>
                                    </div>
                                    <div className="w-full bg-gray-200 rounded-full h-2">
                                        <div 
                                            className="bg-purple-600 h-2 rounded-full progress-bar"
                                            style={{ width: `${Math.min((dayTotals.calories / dietPlan.calories) * 100, 100)}%` }}
                                        ></div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        {/* Meal Logs */}
                        <div className="bg-white rounded-xl shadow-lg p-8">
                            <h2 className="text-xl font-bold text-gray-800 mb-6">Today's Meals</h2>
                            
                            {['breakfast', 'lunch', 'dinner', 'snacks'].map(meal => {
                                const mealLogs = dateLogs.filter(log => log.mealType === meal);
                                const mealTotal = mealLogs.reduce((sum, log) => sum + log.calories, 0);
                                
                                return (
                                    <div key={meal} className="mb-6">
                                        <div className="flex justify-between items-center mb-3">
                                            <h3 className="text-lg font-semibold text-gray-800 capitalize">{meal}</h3>
                                            <span className="text-sm text-gray-600">{Math.round(mealTotal)} cal</span>
                                        </div>
                                        
                                        {mealLogs.length === 0 ? (
                                            <p className="text-gray-400 text-sm italic">No foods logged yet</p>
                                        ) : (
                                            <div className="space-y-2">
                                                {mealLogs.map((log, index) => (
                                                    <div key={index} className="bg-gray-50 p-3 rounded-lg flex justify-between items-center">
                                                        <span className="text-gray-700">{log.name}</span>
                                                        <span className="text-sm text-gray-600">
                                                            {Math.round(log.calories)} cal ‚Ä¢ P: {Math.round(log.protein)}g ‚Ä¢ C: {Math.round(log.carbs)}g ‚Ä¢ F: {Math.round(log.fats)}g
                                                        </span>
                                                    </div>
                                                ))}
                                            </div>
                                        )}
                                    </div>
                                );
                            })}
                        </div>
                    </div>

                    {/* Add Food Modal */}
                    {showAddModal && (
                        <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-6 z-50">
                            <div className="bg-white rounded-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto p-8">
                                <div className="flex justify-between items-center mb-6">
                                    <h2 className="text-2xl font-bold text-gray-800">Add Food</h2>
                                    <button
                                        onClick={() => setShowAddModal(false)}
                                        className="text-gray-400 hover:text-gray-600 text-2xl"
                                    >
                                        √ó
                                    </button>
                                </div>

                                <div className="space-y-6">
                                    <div>
                                        <label className="block text-sm font-medium text-gray-700 mb-2">Meal Type</label>
                                        <select
                                            value={mealType}
                                            onChange={(e) => setMealType(e.target.value)}
                                            className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500"
                                        >
                                            <option value="breakfast">Breakfast</option>
                                            <option value="lunch">Lunch</option>
                                            <option value="dinner">Dinner</option>
                                            <option value="snacks">Snacks</option>
                                        </select>
                                    </div>

                                    <div>
                                        <label className="block text-sm font-medium text-gray-700 mb-2">Search Food</label>
                                        <input
                                            type="text"
                                            value={searchQuery}
                                            onChange={(e) => setSearchQuery(e.target.value)}
                                            placeholder="Search for food..."
                                            className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500"
                                        />
                                    </div>

                                    <div className="max-h-64 overflow-y-auto space-y-2">
                                        {filteredFoods.map((food, index) => (
                                            <button
                                                key={index}
                                                onClick={() => setSelectedFood(food)}
                                                className={`w-full text-left p-4 rounded-lg border-2 transition ${
                                                    selectedFood?.name === food.name
                                                        ? 'border-purple-500 bg-purple-50'
                                                        : 'border-gray-200 hover:border-purple-200'
                                                }`}
                                            >
                                                <div className="font-semibold text-gray-800">{food.name}</div>
                                                <div className="text-sm text-gray-600">
                                                    {food.calories} cal ‚Ä¢ P: {food.protein}g ‚Ä¢ C: {food.carbs}g ‚Ä¢ F: {food.fats}g
                                                </div>
                                            </button>
                                        ))}
                                    </div>

                                    {selectedFood && (
                                        <div>
                                            <label className="block text-sm font-medium text-gray-700 mb-2">
                                                Portion Size (multiplier)
                                            </label>
                                            <input
                                                type="number"
                                                value={portion}
                                                onChange={(e) => setPortion(e.target.value)}
                                                min="0.1"
                                                step="0.1"
                                                className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500"
                                            />
                                            <p className="text-sm text-gray-600 mt-2">
                                                Total: {Math.round(selectedFood.calories * parseFloat(portion || 1))} calories
                                            </p>
                                        </div>
                                    )}

                                    <button
                                        onClick={handleAddFood}
                                        disabled={!selectedFood}
                                        className="w-full bg-purple-600 text-white py-3 rounded-lg font-semibold hover:bg-purple-700 transition disabled:bg-gray-300 disabled:cursor-not-allowed"
                                    >
                                        Add to {mealType.charAt(0).toUpperCase() + mealType.slice(1)}
                                    </button>
                                </div>
                            </div>
                        </div>
                    )}
                </div>
            );
        };

        // Main App Component
        const App = () => {
            const [appState, setAppState] = useState('landing'); // landing, onboarding, dashboard
            const [currentView, setCurrentView] = useState('dashboard'); // dashboard, diet, workout, tracker
            const [userData, setUserData] = useState(null);
            const [dietPlan, setDietPlan] = useState(null);
            const [workoutPlan, setWorkoutPlan] = useState(null);
            const [foodLogs, setFoodLogs] = useState([]);

            useEffect(() => {
                // Load data from localStorage
                const saved = localStorage.getItem('yunityStudioData');
                if (saved) {
                    const data = JSON.parse(saved);
                    setUserData(data.userData);
                    setDietPlan(data.dietPlan);
                    setWorkoutPlan(data.workoutPlan);
                    setFoodLogs(data.foodLogs || []);
                    setAppState('dashboard');
                }
            }, []);

            const handleOnboardingComplete = (formData) => {
                // Calculate diet plan
                const bmr = calculateBMR(
                    parseFloat(formData.weight),
                    parseFloat(formData.height),
                    parseFloat(formData.age),
                    formData.gender
                );
                const tdee = calculateTDEE(bmr, formData.activityLevel);
                const targetCalories = Math.round(adjustCaloriesForGoal(tdee, formData.goal));
                const macros = getMacroDistribution(formData.goal);

                const diet = {
                    calories: targetCalories,
                    protein: Math.round((targetCalories * macros.protein) / 4),
                    carbs: Math.round((targetCalories * macros.carbs) / 4),
                    fats: Math.round((targetCalories * macros.fats) / 9)
                };

                // Generate workout plan
                const frequency = formData.targetBodyParts.length <= 2 ? 3 : 
                                 formData.targetBodyParts.length <= 4 ? 4 : 5;

                const schedule = [];
                const days = ['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday', 'Sunday'];
                
                formData.targetBodyParts.forEach((part, index) => {
                    if (index < frequency) {
                        const exercises = EXERCISE_DATABASE[part].slice(0, 4);
                        schedule.push({
                            day: days[index],
                            focus: part,
                            exercises: exercises
                        });
                    }
                });

                // Fill remaining days with rest or full body
                while (schedule.length < frequency && schedule.length < 7) {
                    schedule.push({
                        day: days[schedule.length],
                        focus: 'rest',
                        exercises: []
                    });
                }

                const workout = {
                    frequency,
                    targetParts: formData.targetBodyParts,
                    schedule
                };

                setUserData(formData);
                setDietPlan(diet);
                setWorkoutPlan(workout);

                // Save to localStorage
                const dataToSave = {
                    userData: formData,
                    dietPlan: diet,
                    workoutPlan: workout,
                    foodLogs: []
                };
                localStorage.setItem('yunityStudioData', JSON.stringify(dataToSave));

                setAppState('dashboard');
            };

            const handleAddFood = (foodLog) => {
                const newLogs = [...foodLogs, foodLog];
                setFoodLogs(newLogs);
                
                // Update localStorage
                const saved = JSON.parse(localStorage.getItem('yunityStudioData'));
                saved.foodLogs = newLogs;
                localStorage.setItem('yunityStudioData', JSON.stringify(saved));
            };

            const handleNavigate = (view) => {
                setCurrentView(view);
            };

            if (appState === 'landing') {
                return <LandingPage onGetStarted={() => setAppState('onboarding')} />;
            }

            if (appState === 'onboarding') {
                return <Onboarding onComplete={handleOnboardingComplete} />;
            }

            if (currentView === 'diet') {
                return <DietPlan userData={userData} dietPlan={dietPlan} onBack={() => setCurrentView('dashboard')} />;
            }

            if (currentView === 'workout') {
                return <WorkoutPlan workoutPlan={workoutPlan} onBack={() => setCurrentView('dashboard')} />;
            }

            if (currentView === 'tracker') {
                return (
                    <FoodTracker
                        foodLogs={foodLogs}
                        dietPlan={dietPlan}
                        onAddFood={handleAddFood}
                        onBack={() => setCurrentView('dashboard')}
                    />
                );
            }

            return (
                <Dashboard
                    userData={userData}
                    dietPlan={dietPlan}
                    workoutPlan={workoutPlan}
                    foodLogs={foodLogs}
                    onNavigate={handleNavigate}
                />
            );
        };

        ReactDOM.render(<App />, document.getElementById('root'));
    </script>
</body>
</html>